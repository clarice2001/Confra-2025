<!doctype html>
<html lang="pt-BR">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Participante â€” Confra FamÃ­lia 2025</title>
<link rel="stylesheet" href="style.css"/>
</head>
<body>
<canvas id="fw" class="fw" aria-hidden="true"></canvas>
<div class="card">
  <img src="DD6B87E9-1FEE-43C9-A4FD-0C3350367ECB.jpeg" class="logoimg" alt="Logo">
  <h2>Sorteio de Pratos (Local)</h2>
  <label>Senha de acesso</label><input id="access" placeholder="Senha de acesso"/>
  <label>Seu nome</label><input id="nome" placeholder="Nome"/>
  <label>Crie uma senha pessoal</label><input id="pwd" type="password" placeholder="Senha"/>
  <button id="draw" class="bigbtn">Sortear (1 vez)</button>
  <button id="check" class="bigbtn outline">Consultar</button>
  <p id="msg" class="resultado"></p>
</div>
<script>
const ITEMS = [
"Arroz (Janta 31/12)","Arroz (AlmoÃ§o 01/01)","FeijÃ£o tropeiro (Janta 31/12)","Feijoada (AlmoÃ§o 01/01)",
"Vinagrete e salada (AlmoÃ§o 01/01)","Vinagrete e salada (Janta 31/12)","Escondidinho Ã  gosto - 15 poÃ§Ãµes (Janta 31/12)",
"SalpicÃ£o Ã  gosto - 15 porÃ§Ãµes (Janta 31/12)","Lasanha Ã  gosto - 15 porÃ§Ãµes (AlmoÃ§o 01/01)","Strogonoff - 15 porÃ§Ãµes (AlmoÃ§o 01/01)",
"Pudim - 15 porÃ§Ãµes (pÃ³s janta 31/12)","Bombom na travessa - 15 porÃ§Ãµes (pÃ³s janta 31/12)","PavÃª - 15 porÃ§Ãµes (pÃ³s almoÃ§o 01/01)",
"Mousse de maracujÃ¡- 15 porÃ§Ãµes (pÃ³s almoÃ§o 01/01)","PÃ£o (contribuiÃ§Ã£o em dinheiro 20,00)","1 CafÃ© pÃ³ (servido pt manhÃ£)",
"1 CafÃ© pÃ³ (servido pt tarde)","1L Leite (servido parte manhÃ£)","1L Leite (servido parte tarde)","1 Margarina 250g",
"1k Queijo","15un Chimango (cafÃ© da manhÃ£)","15un PÃ£o de queijo (cafÃ© da tarde)","1 Bolo simples de padaria (cafÃ© da manhÃ£)",
"1 Bolo simples de padaria (cafÃ© da tarde)","1L Suco (cafÃ© da manhÃ£)","1L Suco (cafÃ© da tarde)","Chocolate em pÃ³",
"Bolo de tapioca - 15 porÃ§Ãµes (cafÃ© da manhÃ£)","Cuscuz- 10 porÃ§Ãµes (cafÃ© da manhÃ£)","Salada de frutas - 15 porÃ§Ãµes (cafÃ© da tarde)",
"A - Champanhe/ espumante sem Ã¡lcool","B - Champanhe/ espumante sem Ã¡lcool"
];

function load(k){return JSON.parse(localStorage.getItem(k)||'null');}
function save(k,v){localStorage.setItem(k,JSON.stringify(v));}
function show(m){document.getElementById('msg').innerText = m;}

document.getElementById('draw').addEventListener('click', ()=>{
  const access = document.getElementById('access').value.trim();
  const nome = document.getElementById('nome').value.trim();
  const pwd = document.getElementById('pwd').value.trim();
  if(!access || !nome || !pwd){ show('Preencha todos os campos.'); return; }
  let parts = load('participants')||[];
  if(parts.find(p=>p.nome===nome && p.pwd===pwd)){ show('VocÃª jÃ¡ sorteou: '+ parts.find(p=>p.nome===nome && p.pwd===pwd).item); return; }
  let restos = load('restos') || ITEMS.slice();
  if(restos.length===0){ show('Nenhum item restante.'); return; }
  const idx = Math.floor(Math.random()*restos.length);
  const chosen = restos.splice(idx,1)[0];
  parts.push({nome, pwd, item: chosen, ts: new Date().toISOString()});
  save('participants', parts); save('restos', restos);
  show('ðŸŽ‰ '+nome+', seu prato: '+chosen);
});

document.getElementById('check').addEventListener('click', ()=>{
  const nome = document.getElementById('nome').value.trim();
  const pwd = document.getElementById('pwd').value.trim();
  if(!nome||!pwd){ show('Preencha nome e senha.'); return; }
  const parts = load('participants')||[];
  const f = parts.find(p=>p.nome===nome && p.pwd===pwd);
  show(f? 'Seu prato: '+f.item : 'Nenhum resultado local.');
});
</script>
</body>
</html>
