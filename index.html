
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sorteios de Pratos 2025</title>
<style>
body {
    background: linear-gradient(#fffbe9, #f7e7c1);
    font-family: 'Trebuchet MS', sans-serif;
    text-align:center;
}
.container {
    margin-top: 25px;
    padding: 25px;
    background: #ffffffdd;
    border-radius: 12px;
    width:90%;
    max-width:380px;
    display:inline-block;
    box-shadow:0 0 18px #e6d28a;
}
button {
    padding: 14px 28px;
    font-size: 18px;
    border:none;
    border-radius:10px;
    background:gold;
    animation: glow 1s infinite alternate;
}
@keyframes glow {
    from{box-shadow:0 0 8px gold;}
    to{box-shadow:0 0 18px gold;}
}
input {
    width:95%;
    padding:12px;
    font-size:16px;
    border-radius:8px;
    border:1px solid #bfa869;
}
#resultado { margin-top:15px; font-size:18px; }
</style>
</head>
<body>

<div class="container">
<h2>Sorteios de Pratos 2025</h2>

<input id="nome" placeholder="Seu nome"><br><br>
<input id="senha" type="password" placeholder="Sua senha"><br><br>

<button onclick="entrar()">Entrar / Conferir</button>

<div id="caixa_sorteio" style="display:none;">
    <button onclick="sortear()">Sortear prato</button>
</div>

<p id="resultado"></p>
</div>

<script>
let itens_default = [
"Arroz (Janta 31/12)","Arroz (Almoço 01/01)","Feijão tropeiro (Janta 31/12)",
"Feijoada (Almoço 01/01)","Vinagrete e salada (Almoço 01/01)","Vinagrete e salada (Janta 31/12)",
"Escondidinho - 15 porções","Salpicão - 15 porções","Lasanha - 15 porções",
"Strogonoff - 15 porções","Pudim - 15 porções","Bombom na travessa - 15 porções",
"Pavê - 15 porções","Mousse de maracujá - 15 porções","Pão (20 reais)",
"Café pó manhã","Café pó tarde","Leite manhã","Leite tarde","Margarina",
"Queijo 1kg","Chimango 15 unidades","Pão de queijo 15 unidades","Bolo manhã",
"Bolo tarde","Suco manhã","Suco tarde","Chocolate em pó","Bolo de tapioca",
"Cuscuz","Salada de frutas","Champanhe A","Champanhe B"
];

let itens_restantes = JSON.parse(localStorage.getItem("itens_restantes") || "null");
if (!itens_restantes) {
    itens_restantes = [...itens_default];
    localStorage.setItem("itens_restantes", JSON.stringify(itens_restantes));
}

let participantes = JSON.parse(localStorage.getItem("participantes") || "[]");

function entrar() {
    let nome = document.getElementById("nome").value.trim();
    let senha = document.getElementById("senha").value.trim();
    if (!nome || !senha) {
        document.getElementById("resultado").innerText = "Preencha nome e senha.";
        return;
    }

    let existente = participantes.find(p => p.nome===nome);

    if (existente) {
        if (existente.senha !== senha) {
            document.getElementById("resultado").innerText = "Senha incorreta.";
            return;
        }
        document.getElementById("resultado").innerText = "Você já sorteou: " + existente.item;
        document.getElementById("caixa_sorteio").style.display = "none";
        return;
    }

    // Novo usuário → pode sortear
    document.getElementById("resultado").innerText = "Você pode sortear.";
    document.getElementById("caixa_sorteio").style.display = "block";
}

function sortear() {
    let nome = document.getElementById("nome").value.trim();
    let senha = document.getElementById("senha").value.trim();

    if (participantes.find(p => p.nome===nome)) {
        document.getElementById("resultado").innerText = "Você já sorteou antes.";
        return;
    }

    if (itens_restantes.length === 0) {
        document.getElementById("resultado").innerText = "Todos os itens acabaram.";
        return;
    }

    let i = Math.floor(Math.random() * itens_restantes.length);
    let escolhido = itens_restantes.splice(i,1)[0];

    participantes.push({nome, senha, item:escolhido});

    localStorage.setItem("itens_restantes", JSON.stringify(itens_restantes));
    localStorage.setItem("participantes", JSON.stringify(participantes));

    document.getElementById("resultado").innerText = "Seu prato: " + escolhido;
    document.getElementById("caixa_sorteio").style.display = "none";
}
</script>

</body>
</html>
